"use strict";function writeText(t,e){e=e||"#ff0000",t=t||"200 Tl'ye Site Yapılır.",ctx.fillStyle=e,ctx.fillRect(posOption.caption.x,posOption.caption.y,posOption.caption.width,posOption.caption.height),ctx.fillStyle="#fff",ctx.fillText(t,posOption.text.x,posOption.text.y)}function drawImage(t,e,a){ctx.drawImage(e,0,0,posOption.image.width,posOption.image.height),writeText(t,a)}var canvas=document.querySelector(".jsCanvas"),ctx=canvas.getContext("2d"),jsCaptionInput=document.querySelector(".jsCaptionInput"),captionText=document.querySelector(".jsCaptionInput").value,saveButton=document.querySelector(".jsSaveImage"),jsFileInput=document.querySelector(".jsFileInput"),jsCaptionBg=document.querySelector(".jsCaptionBg"),jsCaptionBgVal=document.querySelector(".jsCaptionBg").value,flag=0;ctx.font="15px Arial",ctx.textAlign="center",ctx.fillStyle="#fff";var image=new Image;image.setAttribute('crossOrigin', 'anonymous');image.src="https://ysoftaoglu.github.io/CapsGenerator/img/caps.png";var posOption={image:{width:550,height:450},caption:{x:0,y:350,width:500,height:50},text:{x:250,y:380}};image.onload=function(){ctx.drawImage(image,0,0,posOption.image.width,posOption.image.height),writeText(captionText)},jsFileInput.addEventListener("change",function(){flag=0;var t=document.querySelector("input[type=file]").files[0],e=new FileReader;t&&e.readAsDataURL(t),e.onloadend=function(){jsCaptionBg.value="#ff0000",captionText=document.querySelector(".jsCaptionInput").value,image.src=e.result,drawImage(captionText,image,jsCaptionBg)}}),saveButton.addEventListener("click",function(t){if(""!==jsCaptionInput.value){captionText="",jsCaptionBgVal="#ff0000";var e=document.querySelector(".jsDownloadLink");e.href=canvas.toDataURL(),e.download="caps.png"}else t.preventDefault(),document.querySelector(".jsError").style.display="inline-block"}),jsCaptionInput.addEventListener("keyup",function(){document.querySelector(".jsError").style.display="none",captionText=this.value,jsCaptionBgVal=flag?jsCaptionBgVal:"#ff0000",drawImage(captionText,image,jsCaptionBgVal)}),jsCaptionBg.addEventListener("change",function(){flag=1,jsCaptionBgVal=this.value,drawImage(captionText,image,jsCaptionBgVal)});
